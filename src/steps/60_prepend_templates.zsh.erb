# Prepend templates
<%= render_templates("src/templates/*") %>
for ZTEMPLATE in ${(k)ZTEMPLATES}; do
  USER_FILE=${${:-<%= home %>/.${ZTEMPLATE}}:A}
  if ERR=$(command mv -f =(
    print -R ${ZTEMPLATES[${ZTEMPLATE}]}
    if [[ -e ${USER_FILE} ]] cat ${USER_FILE}
  ) ${USER_FILE} 2>&1); then
    print -R "${ZOKAY}Prepended Zim Framework template to ${ZBOLD}${USER_FILE}${ZNORMAL}"
  else
    print -u2 -lR "${ZERROR}Error prepending Zim Framework template to ${ZBOLD}${USER_FILE}${ZNORMAL}" ${ERR}
    return 1
  fi
done
